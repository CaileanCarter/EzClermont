language: python
os:
- linux
dist: trusty
sudo: required
python:
- '3.5'
- '3.6'
before install:
- echo "$PATH"
install:
- pip install coveralls
- pip install -r requirements.txt
script:
- python setup.py install
- nosetests --with-coverage --cover-package=cpcr tests/ -v
after_success: coveralls


jobs:
  include:
    - stage: deploy
      script: echo "Deploying to PyPi"
      deploy:
        provider: pypi
        user: NickWaters
        password:
          secure: "fJjpTk8eP6dUkm11D2rwT8RV0HcEa2hSrgOElhpkn5vMQrjVrrht1NgOVMPXJEr/GmUJUTOkfWIsmB6L3lpq9DQqlkWnh6AHpIWbYuQEIzbOkXNBVWulHnwTlFguhLRqcFxSEV5sI41sNbqJDiJbsnFmKQNPp5aFM/RZ6rksUgEWjtWnEiPIs/Wl558kh6/B0uusT7Ac067yPNwMPors7C6u2RPX81ZUNrYqb0m8aC3DQBTXt2bhMK7OYh/oMogc7JM/rNxsj7eI0G7TW2zBKE7i5GiH8Wr0a4HDqbUbTdJX3JDgcB6WUyxSyv3cfFRDqmWXM3Zct4CQmaPEdT8l4QiB1UbnZClBKXygbS0kgew91oA2Aawz9qPnUJ1QpOFaZYISvwsGyS/v9YJAjnvCTPEargjZLHzNXYt490Drk7WOTYRhE+SnTlRcyzCiav1+gEnL20M3V9Rk1ZqKsfzeK1dl8wfWtLErGy77+IqCSVwPG83gl1IpqkQKjrS2khppRUUKqfXlnItsVsrnTRWNT8GDKtcwMFn6u5Z5SeWEjc36uvjvLpEEvL9VkRz1qjebf1MJotUQjMErjotnnMhqA9YN80At7dduC5aXys0PFLuIUHFEabzcGXkERJQ3wPL7XR4j0IYrbvEEm9QMprm3naQIjSw/nzmXnUXQiFy9WRI="
      on:
        tags: true
